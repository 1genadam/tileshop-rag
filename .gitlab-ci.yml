stages:
  - deploy

deploy_to_heroku:
  stage: deploy
  before_script:
    # Install Heroku CLI
    - apt-get update && apt-get install -y curl
    - curl https://cli-assets.heroku.com/install.sh | sh
    # Set Heroku remote
    - heroku git:remote -a genadam
  script:
    # Set Heroku API key for authentication
    - echo "machine api.heroku.com login _ password $HEROKU_API_KEY" > ~/.netrc
    - echo "machine git.heroku.com login _ password $HEROKU_API_KEY" >> ~/.netrc
    # Push code to Heroku
    - git push https://git.heroku.com/genadam.git main
  only:
    - main

